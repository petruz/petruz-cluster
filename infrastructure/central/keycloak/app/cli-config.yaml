apiVersion: v1
data:
  realm.json: |-
        {
            "realm": "master",
            "clientScopes": [
            {
                "name": "groups",
                "protocol": "openid-connect",
                "protocolMappers": [
                {
                    "name": "groups",
                    "protocol": "openid-connect",
                    "protocolMapper": "oidc-group-membership-mapper",
                    "config": {
                    "id.token.claim": "true",
                    "access.token.claim": "true",
                    "claim.name": "groups",
                    "userinfo.token.claim": "true"
                    }
                }
                ]
            }
            ],
            "groups": [
            {
                "name": "oauth2-proxy"
            },
            {
                "name": "grafana-admin"
            },
            {
                "name": "grafana-dev"
            },
            {
                "name": "admin"
            },
            {
                "name": "guest"
            }
            ],
            "clients": [
            {
                "clientId": "oauth2-proxy",
                "secret": "dsasda",
                "enabled": true,
                "clientAuthenticatorType": "client-secret",
                "redirectUris": [
                "https://oauth2-proxy.petruz-central.it/oauth2/callback"
                ],
                "defaultClientScopes": [
                "email",
                "groups",
                "profile"
                ],
                "optionalClientScopes": [
                "address",
                "microprofile-jwt",
                "offline_access",
                "phone",
                "roles",
                "web-origins"
                ],
                "protocolMappers": [
                {
                    "name": "groups",
                    "protocol": "openid-connect",
                    "protocolMapper": "oidc-group-membership-mapper",
                    "config": {
                    "id.token.claim": "true",
                    "access.token.claim": "true",
                    "claim.name": "groups",
                    "userinfo.token.claim": "true"
                    }
                }
                ]
            },
            {
                "clientId": "grafana",
                "secret": "dasdas",
                "enabled": true,
                "clientAuthenticatorType": "client-secret",
                "redirectUris": [
                "https://grafana.petruz-central.it/login/generic_oauth"
                ],
                "defaultClientScopes": [
                "email",
                "groups",
                "profile",
                "roles",
                "web-origins"
                ],
                "optionalClientScopes": [
                "address",
                "microprofile-jwt",
                "offline_access",
                "phone"
                ],
                "protocolMappers": [
                {
                    "name": "groups",
                    "protocol": "openid-connect",
                    "protocolMapper": "oidc-group-membership-mapper",
                    "config": {
                    "id.token.claim": "true",
                    "access.token.claim": "true",
                    "claim.name": "groups",
                    "userinfo.token.claim": "true"
                    }
                }
                ]
            },
            {
                "clientId": "minio",
                "secret": "dasdsa",
                "enabled": true,
                "clientAuthenticatorType": "client-secret",
                "redirectUris": [
                "https://minio.petruz-central.it/oauth_callback"
                ],
                "defaultClientScopes": [
                "email",
                "groups",
                "profile",
                "roles",
                "web-origins"
                ],
                "optionalClientScopes": [
                "address",
                "microprofile-jwt",
                "offline_access",
                "phone"
                ],
                "protocolMappers": [
                {
                    "name": "groups",
                    "protocol": "openid-connect",
                    "protocolMapper": "oidc-group-membership-mapper",
                    "config": {
                    "id.token.claim": "true",
                    "access.token.claim": "true",
                    "claim.name": "groups",
                    "userinfo.token.claim": "true"
                    }
                }
                ]
            },
            {
                "clientId": "gitops",
                "secret": "dsadsa",
                "enabled": true,
                "clientAuthenticatorType": "client-secret",
                "redirectUris": [
                "https://gitops.petruz-central.it/oauth2/callback"
                ],
                "defaultClientScopes": [
                "email",
                "groups",
                "profile",
                "roles",
                "web-origins"
                ],
                "optionalClientScopes": [
                "address",
                "microprofile-jwt",
                "offline_access",
                "phone"
                ],
                "protocolMappers": [
                {
                    "name": "groups",
                    "protocol": "openid-connect",
                    "protocolMapper": "oidc-group-membership-mapper",
                    "config": {
                    "id.token.claim": "true",
                    "access.token.claim": "true",
                    "claim.name": "groups",
                    "userinfo.token.claim": "true"
                    }
                }
                ]
            },
            {
                "clientId": "coder",
                "secret": "dasdas",
                "enabled": true,
                "clientAuthenticatorType": "client-secret",
                "redirectUris": [
                "https://coder.petruz-central.it/auth/callback"
                ],
                "defaultClientScopes": [
                "email",
                "groups",
                "profile",
                "roles",
                "web-origins"
                ],
                "optionalClientScopes": [
                "address",
                "microprofile-jwt",
                "offline_access",
                "phone"
                ],
                "protocolMappers": [
                {
                    "name": "groups",
                    "protocol": "openid-connect",
                    "protocolMapper": "oidc-group-membership-mapper",
                    "config": {
                    "id.token.claim": "true",
                    "access.token.claim": "true",
                    "claim.name": "groups",
                    "userinfo.token.claim": "true"
                    }
                }
                ]
            },
            {
                "clientId": "rancher",
                "enabled": true,
                "clientAuthenticatorType": "client-secret",
                "secret": "69c74da64f254aaa60f1418c3224624cefd313a1",
                "redirectUris": [
                "https://rancher.petruz-central.it/verify-auth"
                ],
                "defaultClientScopes": [
                "email",
                "groups",
                "profile",
                "roles",
                "web-origins"
                ],
                "optionalClientScopes": [
                "address",
                "microprofile-jwt",
                "offline_access",
                "phone"
                ],
                "protocolMappers": [
                {
                    "name": "groups",
                    "protocol": "openid-connect",
                    "protocolMapper": "oidc-group-membership-mapper",
                    "config": {
                    "id.token.claim": "true",
                    "access.token.claim": "true",
                    "claim.name": "groups",
                    "userinfo.token.claim": "true"
                    }
                },
                {
                    "name": "Client Audience",
                    "protocol": "openid-connect",
                    "protocolMapper": "oidc-audience-mapper",
                    "consentRequired": false,
                    "config": {
                        "included.client.audience": "rancher",
                        "id.token.claim": "false",
                        "access.token.claim": "true"
                    }
                }
                ]
            }
            ],
            "users": [
            {
                "username": "petruz-admin",
                "email": "luca@petruz.it",
                "enabled": true,
                "firstName": "Luca",
                "lastName": "Petruzziello",
                "emailVerified": true,
                "realmRoles": [
                "admin",
                "create-realm",
                "offline_access",
                "uma_authorization",
                "default-roles-master"
                ],
                "groups": [
                "grafana-admin",
                "oauth2-proxy",
                "admin"
                ],
                "attributes": [
                {
                    "locale": [
                    "it"
                    ]
                }
                ]
            },
            {
                "username": "guest",
                "email": "info@petruz.it",
                "enabled": true,
                "firstName": "guest",
                "lastName": "guest",
                "emailVerified": true,
                "groups": [
                "guest"
                ],
                "credentials": [
                {
                    "type": "password",
                    "userLabel": "initial",
                    "value": "sdasda"
                }
                ],
                "attributes": [
                {
                    "locale": [
                    "it"
                    ]
                }
                ]
            }
            ]
        }
kind: ConfigMap
metadata:
    name: cli-config
    namespace: keycloak
